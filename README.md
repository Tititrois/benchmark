# MikroORM 4 vs TypeORM benchmark

This benchmark is using SQLite 3, comparing CRUD operations on 10 000 entities.
To use other drivers, run `docker-compose up` first or adjust the configuration
in `perf.ts` file. 

## Running

```sh
# for mikro-orm 
cd mikro-orm
yarn
yarn start sqlite
yarn start mysql
yarn start mariadb
yarn start pg
yarn start mongo
cd ..

# for typeorm 
cd typeorm
yarn
yarn start
cd ..
```

## Results

Measured on MacBook Pro 15" 2018, 2,2 GHz 6 core Intel Core i7, 16 GB RAM

### MikroORM 4.1.0

#### SQLite

```
$ tsc && node --expose-gc perf sqlite
using sqlite driver, 10 rounds (+1 warm up), 10000 items
┌─────────┬────────────────────┬────────────────────┬────────────────────┬───────────────────┬───────────────────┐
│ (index) │        all         │        find        │       insert       │      update       │      remove       │
├─────────┼────────────────────┼────────────────────┼────────────────────┼───────────────────┼───────────────────┤
│   min   │ 198.2590890005231  │ 44.233061999082565 │ 66.70825500041246  │ 76.51960499957204 │ 6.22520099952817  │
│   avg   │ 215.82629520073533 │ 46.65750430040062  │  79.0355858001858  │ 83.29128799960017 │ 6.841917100548744 │
│   max   │ 245.2044209986925  │ 53.38266599923372  │ 101.86407900229096 │ 92.62632999941707 │ 7.702538002282381 │
└─────────┴────────────────────┴────────────────────┴────────────────────┴───────────────────┴───────────────────┘
```

#### MySQL

```
$ tsc && node --expose-gc perf mysql
using mysql driver, 10 rounds (+1 warm up), 10000 items
┌─────────┬────────────────────┬────────────────────┬────────────────────┬────────────────────┬───────────────────┐
│ (index) │        all         │        find        │       insert       │       update       │      remove       │
├─────────┼────────────────────┼────────────────────┼────────────────────┼────────────────────┼───────────────────┤
│   min   │ 343.07378400862217 │ 19.39351600036025  │ 142.6843840032816  │ 167.48003799840808 │ 6.391544997692108 │
│   avg   │  361.428291900456  │ 21.802668000385165 │ 158.26164880022407 │ 173.9753436997533  │ 7.388631400093436 │
│   max   │ 380.9656089954078  │ 26.460041999816895 │ 179.51513800024986 │ 180.8963150009513  │ 9.583172000944614 │
└─────────┴────────────────────┴────────────────────┴────────────────────┴────────────────────┴───────────────────┘
```

#### MariaDB

```
$ tsc && node --expose-gc perf mariadb
using mariadb driver, 10 rounds (+1 warm up), 10000 items
┌─────────┬────────────────────┬────────────────────┬────────────────────┬────────────────────┬───────────────────┐
│ (index) │        all         │        find        │       insert       │       update       │      remove       │
├─────────┼────────────────────┼────────────────────┼────────────────────┼────────────────────┼───────────────────┤
│   min   │ 389.9811900034547  │ 20.50638000294566  │ 165.87902799993753 │ 191.0289619974792  │ 6.506144002079964 │
│   avg   │ 407.9750717006624  │ 22.753213199600577 │ 176.4307077012956  │ 201.68880200013518 │  7.102348799631   │
│   max   │ 435.90401600673795 │ 30.349167998880148 │ 187.67842300236225 │ 227.7049420028925  │ 7.996805999428034 │
└─────────┴────────────────────┴────────────────────┴────────────────────┴────────────────────┴───────────────────┘
```

#### PostgreSQL

```
$ tsc && node --expose-gc perf pg
using pg driver, 10 rounds (+1 warm up), 10000 items
┌─────────┬────────────────────┬────────────────────┬────────────────────┬────────────────────┬────────────────────┐
│ (index) │        all         │        find        │       insert       │       update       │       remove       │
├─────────┼────────────────────┼────────────────────┼────────────────────┼────────────────────┼────────────────────┤
│   min   │ 374.1108589991927  │ 28.899238999933004 │ 166.85555800050497 │ 167.68295900151134 │ 6.3758959993720055 │
│   avg   │  390.939445900172  │ 30.77325369939208  │  180.151679199934  │ 173.19371300041675 │ 6.820800000429154  │
│   max   │ 418.05538599938154 │ 39.159864999353886 │ 203.1495699994266  │ 188.21327799931169 │ 7.058897003531456  │
└─────────┴────────────────────┴────────────────────┴────────────────────┴────────────────────┴────────────────────┘
```

#### MongoDB

```
$ tsc && node --expose-gc perf mongo
using mongo driver, 10 rounds (+1 warm up), 10000 items
┌─────────┬────────────────────┬───────────────────┬────────────────────┬───────────────────┬───────────────────┐
│ (index) │        all         │       find        │       insert       │      update       │      remove       │
├─────────┼────────────────────┼───────────────────┼────────────────────┼───────────────────┼───────────────────┤
│   min   │ 977.2337610013783  │ 71.41838699951768 │ 304.90720300003886 │ 538.6895850002766 │ 38.80697300285101 │
│   avg   │ 995.3925732985139  │ 77.66909039951861 │ 322.91207519955935 │ 555.3070927996189 │ 39.50431489981711 │
│   max   │ 1039.4664329998195 │ 88.5709489993751  │ 348.38872199878097 │ 564.320159997791  │ 40.23021500185132 │
└─────────┴────────────────────┴───────────────────┴────────────────────┴───────────────────┴───────────────────┘
```

## TypeORM 0.2.28

#### SQLite

```
$ tsc && node --expose-gc perf
┌─────────┬────────────────────┬───────────────────┬────────────────────┬────────────────────┬────────────────────┐
│ (index) │        all         │       find        │       insert       │       update       │       remove       │
├─────────┼────────────────────┼───────────────────┼────────────────────┼────────────────────┼────────────────────┤
│   min   │ 13131.161956001073 │ 61.57548899948597 │ 3020.5984300002456 │ 5234.162716001272  │  4804.70919900015  │
│   avg   │ 13303.172528300807 │ 64.07001790031791 │ 3063.0884948004036 │ 5317.4669320002195 │ 4858.547083599866  │
│   max   │ 13468.373252004385 │  69.436722997576  │ 3170.9548320025206 │ 5416.373204000294  │ 5017.7623269967735 │
└─────────┴────────────────────┴───────────────────┴────────────────────┴────────────────────┴────────────────────┘
```
